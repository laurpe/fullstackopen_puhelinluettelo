(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(15),c=n.n(r),u=n(16),l=n(2),i=n(4),f=n.n(i),m="/api/persons",s=function(){return f.a.get(m)},d=function(e){return f.a.post(m,e)},p=function(e,t){return f.a.put("".concat(m,"/").concat(e),t)},h=function(e){return f.a.delete("".concat(m,"/").concat(e))},b=function(e){var t=e.filter,n=e.filterData;return o.a.createElement("form",null,o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:t,onChange:n})))},v=function(e){var t=e.persons,n=e.onPersonDelete,a=e.setNotification,r=function(e){if(!0===window.confirm("Are you sure you want to delete ".concat(e.name," from the phonebook?"))){var o=t.filter((function(t){return t!==e}));h(e.id).then((function(){return n(o)})).catch((function(){a({message:"".concat(e.name," was already removed from server"),type:"error"}),setTimeout((function(){a(null)}),5e3)})),a({message:"".concat(e.name," was deleted from the phonebook"),type:"notification"}),setTimeout((function(){a(null)}),5e3)}};return o.a.createElement("table",null,o.a.createElement("tbody",null,t.map((function(e){return o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.number),o.a.createElement("td",null,o.a.createElement("button",{onClick:function(){return function(e){r(e)}(e)}},"delete")))}))))},E=function(e){var t=e.onPersonCreate,n=e.onPersonUpdate,r=e.persons,c=e.setNotification,u=Object(a.useState)(""),i=Object(l.a)(u,2),f=i[0],m=i[1],s=Object(a.useState)(""),h=Object(l.a)(s,2),b=h[0],v=h[1],E=function(){return 0!==r.filter((function(e){return e.name===f})).length},w=function(e){var t=r.map((function(e){return e.name})).indexOf(f),a=r[t].id;p(a,e).then((function(e){return n(e.data,t)})).catch((function(){c({message:"".concat(f," was already removed from server"),type:"error"}),setTimeout((function(){c(null)}),5e3)})),c({message:"Phone number of ".concat(f," was updated"),type:"notification"}),setTimeout((function(){c(null)}),5e3)};return o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={name:f,number:b,id:Math.floor(1e5*Math.random())};E()?!0===window.confirm("".concat(f," is already in the phonebook, do you want to replace the old number with a new one?"))&&w(n):(d(n).then((function(e){t(e.data)})),c({message:"".concat(f," was added to the phonebook"),type:"notification"}),setTimeout((function(){c(null)}),5e3))}},o.a.createElement("div",null,o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:f,onChange:function(e){m(e.target.value)}})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:b,onChange:function(e){v(e.target.value)}}))),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},w=(n(39),function(e){var t=e.notification;return null===t?null:o.a.createElement("div",{className:t.type},t.message)}),g=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),f=i[0],m=i[1],d=Object(a.useState)({}),p=Object(l.a)(d,2),h=p[0],g=p[1];Object(a.useEffect)((function(){s().then((function(e){return r(e.data)}))}),[]);var y=n.filter((function(e){return e.name.toLowerCase().includes(f.toLowerCase())}));return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(w,{notification:h}),o.a.createElement(b,{filter:f,filterData:function(e){console.log(e.target.value),m(e.target.value)}}),o.a.createElement("h2",null,"Add a new person"),o.a.createElement(E,{onPersonCreate:function(e){r(n.concat(e))},onPersonUpdate:function(e,t){var a=Object(u.a)(n);a[t]=e,r(a)},persons:n,setNotification:g}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(v,{persons:y,onPersonDelete:function(e){r(e)},setNotification:g}))};c.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.bc3a2f3e.chunk.js.map
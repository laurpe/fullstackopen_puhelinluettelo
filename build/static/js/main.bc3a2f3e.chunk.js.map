{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonList.js","components/PersonForm.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","delete","Filter","filter","filterData","value","onChange","PersonList","persons","onPersonDelete","setNotification","deletePerson","person","window","confirm","name","personsWithoutDeletedPerson","p","personService","then","catch","message","type","setTimeout","map","key","number","onClick","handleDeleteClick","PersonForm","onPersonCreate","onPersonUpdate","useState","newName","setNewName","newNumber","setNewNumber","nameIsAlreadyAdded","length","updateNumber","indexOfPerson","indexOf","idOfPerson","response","data","onSubmit","event","preventDefault","personObject","Math","floor","random","target","Notification","notification","className","App","setPersons","setFilter","useEffect","personsToShow","toLowerCase","includes","console","log","concat","personsCopy","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bc3a2f3e.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nexport default { getAll, create, update, remove };\n","import React from \"react\";\n\nconst Filter = ({ filter, filterData }) => {\n  return (\n    <form>\n      <div>\n        filter shown with <input value={filter} onChange={filterData} />\n      </div>\n    </form>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\nimport personService from \"../services/persons.js\";\n\nconst PersonList = ({ persons, onPersonDelete, setNotification }) => {\n  const handleDeleteClick = (person) => {\n    deletePerson(person);\n  };\n\n  const deletePerson = (person) => {\n    const result = window.confirm(\n      `Are you sure you want to delete ${person.name} from the phonebook?`\n    );\n\n    if (result === true) {\n      const personsWithoutDeletedPerson = persons.filter((p) => p !== person);\n\n      personService\n        .remove(person.id)\n        .then(() => onPersonDelete(personsWithoutDeletedPerson))\n        .catch(() => {\n          setNotification({\n            message: `${person.name} was already removed from server`,\n            type: \"error\",\n          });\n          setTimeout(() => {\n            setNotification(null);\n          }, 5000);\n        });\n      setNotification({\n        message: `${person.name} was deleted from the phonebook`,\n        type: \"notification\",\n      });\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    }\n  };\n\n  return (\n    <table>\n      <tbody>\n        {persons.map((person) => (\n          <tr key={person.id}>\n            <td>{person.name}</td>\n            <td>{person.number}</td>\n            <td>\n              <button onClick={() => handleDeleteClick(person)}>delete</button>\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nexport default PersonList;\n","import React, { useState } from \"react\";\nimport personService from \"../services/persons\";\n\nconst PersonForm = ({\n  onPersonCreate,\n  onPersonUpdate,\n  persons,\n  setNotification,\n}) => {\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n\n  const handleNewName = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      id: Math.floor(Math.random() * 100000),\n    };\n\n    if (nameIsAlreadyAdded()) {\n      const result = window.confirm(\n        `${newName} is already in the phonebook, do you want to replace the old number with a new one?`\n      );\n\n      if (result === true) {\n        updateNumber(personObject);\n      }\n    } else {\n      personService.create(personObject).then((response) => {\n        onPersonCreate(response.data);\n      });\n\n      setNotification({\n        message: `${newName} was added to the phonebook`,\n        type: \"notification\",\n      });\n\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    }\n  };\n\n  const nameIsAlreadyAdded = () => {\n    const sameNames = persons.filter((person) => person.name === newName);\n\n    return sameNames.length !== 0 ? true : false;\n  };\n\n  const updateNumber = (person) => {\n    const personNames = persons.map((person) => person.name);\n    const indexOfPerson = personNames.indexOf(newName);\n    const idOfPerson = persons[indexOfPerson].id;\n\n    personService\n      .update(idOfPerson, person)\n      .then((response) => onPersonUpdate(response.data, indexOfPerson))\n      .catch(() => {\n        setNotification({\n          message: `${newName} was already removed from server`,\n          type: \"error\",\n        });\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n      });\n\n    setNotification({\n      message: `Phone number of ${newName} was updated`,\n      type: \"notification\",\n    });\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        <div>\n          name: <input value={newName} onChange={handleNewName} />\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNewNumber} />\n        </div>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport Filter from \"./components/Filter\";\nimport PersonList from \"./components/PersonList\";\nimport PersonForm from \"./components/PersonForm\";\nimport \"./index.css\";\n\nconst Notification = ({ notification }) => {\n  if (notification === null) {\n    return null;\n  }\n\n  return <div className={notification.type}>{notification.message}</div>;\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [notification, setNotification] = useState({});\n\n  useEffect(() => {\n    personService.getAll().then((response) => setPersons(response.data));\n  }, []);\n\n  const filterData = (event) => {\n    console.log(event.target.value);\n    setFilter(event.target.value);\n  };\n\n  const personsToShow = persons.filter((person) =>\n    person.name.toLowerCase().includes(filter.toLowerCase())\n  );\n\n  const addPerson = (person) => {\n    setPersons(persons.concat(person));\n  };\n\n  const deletePerson = (newPersons) => {\n    setPersons(newPersons);\n  };\n\n  const updatePerson = (person, indexOfPerson) => {\n    const personsCopy = [...persons];\n    personsCopy[indexOfPerson] = person;\n\n    setPersons(personsCopy);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification notification={notification} />\n\n      <Filter filter={filter} filterData={filterData} />\n\n      <h2>Add a new person</h2>\n\n      <PersonForm\n        onPersonCreate={addPerson}\n        onPersonUpdate={updatePerson}\n        persons={persons}\n        setNotification={setNotification}\n      />\n\n      <h2>Numbers</h2>\n      <PersonList\n        persons={personsToShow}\n        onPersonDelete={deletePerson}\n        setNotification={setNotification}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}